<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Discover Prophet - Google Trends Dashboard</title>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <div class="header-content">
            <div>
                <h1><i class="fas fa-chart-line"></i> Discover Prophet</h1>
                <p class="update-info">Dashboard aggiornata: <span id="updateTimestamp">...</span></p>
                <p class="update-info openai-info">AI Analysis: <span id="openaiStatus">...</span> (Model: <span id="openaiModel">...</span>)</p>
            </div>
            <div class="header-badge">
                <span><i class="fab fa-google"></i> Powered by Google Trends & OpenAI</span>
            </div>
        </div>
    </header>

    <main class="dashboard">

        <div class="prophecy-container">
             <h2><i class="fas fa-wand-magic-sparkles"></i> Profezie di Oggi</h2>
            <div class="prophecy-content">
                <p id="prophecyText">Caricamento profezia...</p>
                <button id="toggleProphecy" class="toggle-prophecy" style="display: none;">Mostra tutto <i class="fas fa-chevron-down"></i></button>
            </div>
        </div>
        <div class="controls">
            <input type="text" id="searchBox" class="search-box" placeholder="Cerca trend o entità AI...">
            <div class="sorting">
                <label for="sortBy">Ordina per:</label>
                <select id="sortBy">
                    <option value="discover_score">Discover Score</option>
                    <option value="rank">Rank Originale</option>
                    <option value="saturation_score">Saturazione</option>
                    <option value="score_1h">Score 1 ora</option>
                    <option value="score_4h">Score 4 ore</option>
                    <option value="score_7d">Score 7 giorni</option>
                </select>
                <select id="sortOrder">
                    <option value="desc">Decrescente</option>
                    <option value="asc">Crescente</option>
                </select>
            </div>
        </div>

        <div class="table-container">
            <table class="trends-table" id="trendsTable">
                <thead>
                    <tr>
                        <th>#</th>
                        <th>Rank</th>
                        <th>Trend & <span title="Entità suggerite da AI">Entità AI</span></th>
                        <th>DScore</th>
                        <th>1h</th>
                        <th>4h</th>
                        <th>7d</th>
                        <th>Saturazione</th>
                        <th>Trend Chart</th>
                    </tr>
                </thead>
                <tbody id="trendsTableBody">
                    <tr class="loading-row"> <td colspan="9" style="text-align: center; padding: 30px;"> <i class="fas fa-spinner fa-spin"></i> Caricamento dati... </td> </tr>
                </tbody>
            </table>
        </div>
        <div id="noResultsMessage" class="no-results-message" style="display: none;"> Nessun risultato trovato per la ricerca. </div>
    </main>

    <footer>
         <p>&copy; <span id="currentYear"></span> Discover Prophet - Powered by Google Trends & OpenAI</p>
         <p class="version">Version 7.9.1 - AI Prophecy</p> </footer>

    <script src="data.js"></script>
    <script src="script.js"></script>
</body>
</html>
